<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ìƒì‹ í€´ì¦ˆ</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>ìƒì‹ í€´ì¦ˆ</h1>
    <div id="start-screen">
      <button class="btn level" onclick="startQuiz('ë¬´ì‹')">ë¬´ì‹</button>
      <button class="btn level" onclick="startQuiz('í‰ë²”')">í‰ë²”</button>
      <button class="btn level" onclick="startQuiz('ë°•ì‚¬')">ë°•ì‚¬</button>
    </div>
    <div id="quiz-screen" class="hidden">
      <div id="question-box"></div>
      <div id="choices-box" class="choices-grid"></div>
    </div>
    <div id="result-screen" class="hidden">
      <h2 id="result-text"></h2>
      <button class="btn" onclick="restartQuiz()">ë‹¤ì‹œ í’€ê¸°</button>
    </div>
  </div>
  <script>
const allQuestions = [
  {"question":"ì§€êµ¬ì—ì„œ ê°€ì¥ í° ëŒ€ë¥™ì€?","choices":["ì•„í”„ë¦¬ì¹´","ì•„ì‹œì•„","ìœ ëŸ½","ë‚¨ì•„ë©”ë¦¬ì¹´"],"answer":1,"level":"ë¬´ì‹"},
  {"question":"ìš°ë¦¬ë‚˜ë¼ì˜ ìˆ˜ë„ëŠ”?","choices":["ì„œìš¸","ë¶€ì‚°","ì¸ì²œ","ëŒ€ì „"],"answer":0,"level":"ë¬´ì‹"},
  {"question":"ë¬¼ì˜ í™”í•™ì‹ì€?","choices":["CO2","H2O","O2","NaCl"],"answer":1,"level":"í‰ë²”"},
  {"question":"ëŒ€í•œë¯¼êµ­ì˜ ì²« ëŒ€í†µë ¹ì€?","choices":["ê¹€ëŒ€ì¤‘","ë°•ì •í¬","ì´ìŠ¹ë§Œ","ìœ¤ë³´ì„ "],"answer":2,"level":"í‰ë²”"},
  {"question":"ë¹›ì˜ ì†ë„ëŠ” ì•½ ì–¼ë§ˆì¸ê°€?","choices":["300,000km/s","150,000km/s","1,000km/s","3,000km/s"],"answer":0,"level":"ë°•ì‚¬"},
  {"question":"í”¼íƒ€ê³ ë¼ìŠ¤ ì •ë¦¬ëŠ”?","choices":["a + b = c","E = mc^2","a^2 + b^2 = c^2","F = ma"],"answer":2,"level":"ë°•ì‚¬"}
];

let currentQuestionIndex = 0;
let score = 0;
let questions = [];

function startQuiz(level) {
  questions = allQuestions.filter(q => q.level === level);
  questions = shuffleArray(questions).slice(0, 5);
  currentQuestionIndex = 0;
  score = 0;
  document.getElementById("start-screen").classList.add("hidden");
  document.getElementById("result-screen").classList.add("hidden");
  document.getElementById("quiz-screen").classList.remove("hidden");
  showQuestion();
}

function showQuestion() {
  const q = questions[currentQuestionIndex];
  document.getElementById("question-box").innerText = `${currentQuestionIndex + 1}. ${q.question}`;
  const choicesBox = document.getElementById("choices-box");
  choicesBox.innerHTML = "";
  q.choices.forEach((choice, idx) => {
    const btn = document.createElement("button");
    btn.className = "btn choice";
    btn.innerText = choice;
    btn.onclick = () => handleAnswer(idx);
    choicesBox.appendChild(btn);
  });
}

function handleAnswer(selectedIdx) {
  if (selectedIdx === questions[currentQuestionIndex].answer) {
    score++;
  }
  currentQuestionIndex++;
  if (currentQuestionIndex < questions.length) {
    showQuestion();
  } else {
    endQuiz();
  }
}

function endQuiz() {
  document.getElementById("quiz-screen").classList.add("hidden");
  document.getElementById("result-screen").classList.remove("hidden");
  document.getElementById("result-text").innerText = score === 5
    ? "ğŸ‰ ëª¨ë“  ë¬¸ì œë¥¼ ë§ì·„ì–´ìš”! í´ë¦¬ì–´!"
    : `ì´ ${score}ë¬¸ì œ ë§ì·„ì–´ìš”! ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!`;
  setTimeout(restartQuiz, 10000); // 10ì´ˆ í›„ ì¬ì‹œì‘
}

function restartQuiz() {
  document.getElementById("quiz-screen").classList.add("hidden");
  document.getElementById("result-screen").classList.add("hidden");
  document.getElementById("start-screen").classList.remove("hidden");
}

function shuffleArray(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}
  </script>
</body>
</html>
